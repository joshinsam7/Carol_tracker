{"ast":null,"code":"var _jsxFileName = \"/Users/joshinsam/Projects/webapps/carol-tracker/frontend/src/components/BusMap.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { MapContainer, TileLayer, Marker, Polyline, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport axios from \"axios\";\nimport busIconImg from \"../assets/bus.png\";\nimport nextStopIconImg from \"../assets/orange-locale.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst busIcon = L.icon({\n  iconUrl: busIconImg,\n  iconSize: [50, 50],\n  iconAnchor: [25, 50],\n  popupAnchor: [0, -50]\n});\nconst destinationIcon = L.icon({\n  iconUrl: nextStopIconImg,\n  iconSize: [30, 30],\n  iconAnchor: [15, 30],\n  popupAnchor: [0, -30]\n});\nconst OFF_ROUTE_THRESHOLD = 30;\nfunction distanceFromPolyline(point, polyline) {\n  if (!polyline || polyline.length === 0) return Infinity;\n  const latlngPoint = L.latLng(point[0], point[1]);\n  return Math.min(...polyline.map(p => latlngPoint.distanceTo(L.latLng(p[0], p[1]))));\n}\nfunction FollowBus({\n  position,\n  manualOverride\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (!manualOverride && position) map.setView(position, map.getZoom());\n  }, [position, map, manualOverride]);\n  return null;\n}\n_s(FollowBus, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = FollowBus;\nfunction FitToTwoMarkers({\n  positions = [],\n  minZoom = 5\n}) {\n  _s2();\n  const map = useMap();\n  useEffect(() => {\n    const validPositions = positions.filter(pos => pos && pos[0] != null && pos[1] != null);\n    if (validPositions.length < 2) return;\n    const bounds = L.latLngBounds(validPositions);\n    const zoom = map.getBoundsZoom(bounds, false);\n    map.setView(bounds.getCenter(), Math.max(zoom - 0.55, minZoom));\n  }, [map, positions, minZoom]);\n  return null;\n}\n_s2(FitToTwoMarkers, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c2 = FitToTwoMarkers;\nexport default function Map({\n  currentLocation = {\n    lat: 29.619707,\n    lng: -95.3193855\n  },\n  destinationStop = {},\n  busStatus = \"idle\",\n  setRouteETA = () => {},\n  data = []\n} = {}) {\n  _s3();\n  const defaultPosition = [29.619707, -95.3193855];\n  const [busPosition, setBusPosition] = useState([currentLocation.lat, currentLocation.lng]);\n  const [busPath, setBusPath] = useState([[currentLocation.lat, currentLocation.lng]]);\n  const [destination, setDestination] = useState((destinationStop === null || destinationStop === void 0 ? void 0 : destinationStop.Latitude) != null && (destinationStop === null || destinationStop === void 0 ? void 0 : destinationStop.Longitude) != null ? [destinationStop.Latitude, destinationStop.Longitude] : null);\n  const [routeCoords, setRouteCoords] = useState([]);\n  const [manualOverride, setManualOverride] = useState(false);\n  const intervalRef = useRef(null);\n\n  // --- Update destination if destinationStop changes\n  useEffect(() => {\n    const {\n      Latitude,\n      Longitude\n    } = destinationStop || {};\n    if (Latitude != null && Longitude != null) {\n      setDestination([Latitude, Longitude]);\n      setRouteCoords([]);\n    } else {\n      setDestination(null);\n    }\n  }, [destinationStop]);\n\n  // --- Animate bus movement\n  useEffect(() => {\n    if (!currentLocation) return;\n    const start = busPosition;\n    const end = [currentLocation.lat, currentLocation.lng];\n    const steps = 60;\n    let step = 0;\n    if (intervalRef.current) clearInterval(intervalRef.current);\n    intervalRef.current = setInterval(() => {\n      step++;\n      const lat = start[0] + (end[0] - start[0]) * step / steps;\n      const lng = start[1] + (end[1] - start[1]) * step / steps;\n      const updatedPos = [lat, lng];\n      setBusPosition(updatedPos);\n      setBusPath(prev => [...prev, updatedPos]);\n      if (routeCoords.length > 0 && distanceFromPolyline(updatedPos, routeCoords) > OFF_ROUTE_THRESHOLD) {\n        setRouteCoords([]);\n      }\n      if (step >= steps) clearInterval(intervalRef.current);\n    }, 1000);\n    return () => clearInterval(intervalRef.current);\n  }, [currentLocation]); // depend on currentLocation\n\n  // --- Fetch OSRM route once per destination\n  useEffect(() => {\n    if (!destination || busStatus === \"idle\" || routeCoords.length > 0) return;\n    const fetchRoute = async () => {\n      try {\n        var _res$data$routes, _res$data$routes$, _res$data$routes$$geo, _res$data$routes$$geo2;\n        const url = `https://router.project-osrm.org/route/v1/driving/${busPosition[1]},${busPosition[0]};${destination[1]},${destination[0]}?overview=full&geometries=geojson`;\n        const res = await axios.get(url);\n        const coords = ((_res$data$routes = res.data.routes) === null || _res$data$routes === void 0 ? void 0 : (_res$data$routes$ = _res$data$routes[0]) === null || _res$data$routes$ === void 0 ? void 0 : (_res$data$routes$$geo = _res$data$routes$.geometry) === null || _res$data$routes$$geo === void 0 ? void 0 : (_res$data$routes$$geo2 = _res$data$routes$$geo.coordinates) === null || _res$data$routes$$geo2 === void 0 ? void 0 : _res$data$routes$$geo2.map(([lon, lat]) => [lat, lon])) || [];\n        setRouteCoords(coords);\n      } catch (err) {\n        console.error(\"Error fetching route:\", err);\n      }\n    };\n    fetchRoute();\n  }, [destination, busStatus, busPosition, routeCoords.length]);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: busPosition,\n    zoom: 10,\n    style: {\n      height: \"100%\",\n      width: \"100%\"\n    },\n    onZoom: () => setManualOverride(true),\n    onDragStart: () => setManualOverride(true),\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/\\\">OpenStreetMap</a>\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), routeCoords.length > 0 && /*#__PURE__*/_jsxDEV(Polyline, {\n      positions: routeCoords,\n      pathOptions: {\n        color: \"#1a73e8\",\n        weight: 5,\n        opacity: 0.9\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 34\n    }, this), busPath.length > 1 && /*#__PURE__*/_jsxDEV(Polyline, {\n      positions: busPath,\n      pathOptions: {\n        color: \"#00cc00\",\n        weight: 3,\n        opacity: 0.7,\n        dashArray: \"5,10\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 30\n    }, this), (busPosition === null || busPosition === void 0 ? void 0 : busPosition[0]) != null && (busPosition === null || busPosition === void 0 ? void 0 : busPosition[1]) != null && /*#__PURE__*/_jsxDEV(Marker, {\n      position: busPosition,\n      icon: busIcon,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: busPosition[0] === defaultPosition[0] ? \"Bus has not started yet üö´\" : \"Bus is here üöç\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this), (destination === null || destination === void 0 ? void 0 : destination[0]) != null && (destination === null || destination === void 0 ? void 0 : destination[1]) != null && /*#__PURE__*/_jsxDEV(Marker, {\n      position: destination,\n      icon: destinationIcon,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: \"Next Stop \\uD83D\\uDCCD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }, this), (busPosition === null || busPosition === void 0 ? void 0 : busPosition[0]) != null && (destination === null || destination === void 0 ? void 0 : destination[0]) != null && /*#__PURE__*/_jsxDEV(FitToTwoMarkers, {\n      positions: [busPosition, destination],\n      minZoom: 5\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 64\n    }, this), /*#__PURE__*/_jsxDEV(FollowBus, {\n      position: busPosition,\n      manualOverride: manualOverride\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}\n_s3(Map, \"OqpfdhSDumboLtMKBcP62HgjiYE=\");\n_c3 = Map;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"FollowBus\");\n$RefreshReg$(_c2, \"FitToTwoMarkers\");\n$RefreshReg$(_c3, \"Map\");","map":{"version":3,"names":["React","useEffect","useState","useRef","MapContainer","TileLayer","Marker","Polyline","Popup","useMap","L","axios","busIconImg","nextStopIconImg","jsxDEV","_jsxDEV","busIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","destinationIcon","OFF_ROUTE_THRESHOLD","distanceFromPolyline","point","polyline","length","Infinity","latlngPoint","latLng","Math","min","map","p","distanceTo","FollowBus","position","manualOverride","_s","setView","getZoom","_c","FitToTwoMarkers","positions","minZoom","_s2","validPositions","filter","pos","bounds","latLngBounds","zoom","getBoundsZoom","getCenter","max","_c2","Map","currentLocation","lat","lng","destinationStop","busStatus","setRouteETA","data","_s3","defaultPosition","busPosition","setBusPosition","busPath","setBusPath","destination","setDestination","Latitude","Longitude","routeCoords","setRouteCoords","setManualOverride","intervalRef","start","end","steps","step","current","clearInterval","setInterval","updatedPos","prev","fetchRoute","_res$data$routes","_res$data$routes$","_res$data$routes$$geo","_res$data$routes$$geo2","url","res","get","coords","routes","geometry","coordinates","lon","err","console","error","center","style","height","width","onZoom","onDragStart","children","attribution","fileName","_jsxFileName","lineNumber","columnNumber","pathOptions","color","weight","opacity","dashArray","_c3","$RefreshReg$"],"sources":["/Users/joshinsam/Projects/webapps/carol-tracker/frontend/src/components/BusMap.js"],"sourcesContent":["/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\nimport React, {useEffect, useState, useRef} from \"react\";\nimport {MapContainer, TileLayer, Marker, Polyline, Popup, useMap} from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport axios from \"axios\";\nimport busIconImg from \"../assets/bus.png\";\nimport nextStopIconImg from \"../assets/orange-locale.png\";\n\nconst busIcon = L.icon({\n  iconUrl: busIconImg,\n  iconSize: [50, 50],\n  iconAnchor: [25, 50],\n  popupAnchor: [0, -50],\n});\n\nconst destinationIcon = L.icon({\n  iconUrl: nextStopIconImg,\n  iconSize: [30, 30],\n  iconAnchor: [15, 30],\n  popupAnchor: [0, -30],\n});\n\nconst OFF_ROUTE_THRESHOLD = 30;\n\nfunction distanceFromPolyline(point, polyline) {\n  if (!polyline || polyline.length === 0) return Infinity;\n  const latlngPoint = L.latLng(point[0], point[1]);\n  return Math.min(...polyline.map((p) => latlngPoint.distanceTo(L.latLng(p[0], p[1]))));\n}\n\nfunction FollowBus({position, manualOverride}) {\n  const map = useMap();\n  useEffect(() => {\n    if (!manualOverride && position) map.setView(position, map.getZoom());\n  }, [position, map, manualOverride]);\n  return null;\n}\n\nfunction FitToTwoMarkers({positions = [], minZoom = 5}) {\n  const map = useMap();\n  useEffect(() => {\n    const validPositions = positions.filter((pos) => pos && pos[0] != null && pos[1] != null);\n    if (validPositions.length < 2) return;\n    const bounds = L.latLngBounds(validPositions);\n    const zoom = map.getBoundsZoom(bounds, false);\n    map.setView(bounds.getCenter(), Math.max(zoom - 0.55, minZoom));\n  }, [map, positions, minZoom]);\n  return null;\n}\n\nexport default function Map({\n  currentLocation = {lat: 29.619707, lng: -95.3193855},\n  destinationStop = {},\n  busStatus = \"idle\",\n  setRouteETA = () => {},\n  data = [],\n} = {}) {\n  const defaultPosition = [29.619707, -95.3193855];\n\n  const [busPosition, setBusPosition] = useState([currentLocation.lat, currentLocation.lng]);\n  const [busPath, setBusPath] = useState([[currentLocation.lat, currentLocation.lng]]);\n  const [destination, setDestination] = useState(\n    destinationStop?.Latitude != null && destinationStop?.Longitude != null ?\n      [destinationStop.Latitude, destinationStop.Longitude] :\n      null,\n  );\n  const [routeCoords, setRouteCoords] = useState([]);\n  const [manualOverride, setManualOverride] = useState(false);\n  const intervalRef = useRef(null);\n\n  // --- Update destination if destinationStop changes\n  useEffect(() => {\n    const {Latitude, Longitude} = destinationStop || {};\n    if (Latitude != null && Longitude != null) {\n      setDestination([Latitude, Longitude]);\n      setRouteCoords([]);\n    } else {\n      setDestination(null);\n    }\n  }, [destinationStop]);\n\n  // --- Animate bus movement\n  useEffect(() => {\n    if (!currentLocation) return;\n\n    const start = busPosition;\n    const end = [currentLocation.lat, currentLocation.lng];\n    const steps = 60;\n    let step = 0;\n\n    if (intervalRef.current) clearInterval(intervalRef.current);\n\n    intervalRef.current = setInterval(() => {\n      step++;\n      const lat = start[0] + ((end[0] - start[0]) * step) / steps;\n      const lng = start[1] + ((end[1] - start[1]) * step) / steps;\n      const updatedPos = [lat, lng];\n\n      setBusPosition(updatedPos);\n      setBusPath((prev) => [...prev, updatedPos]);\n\n      if (routeCoords.length > 0 && distanceFromPolyline(updatedPos, routeCoords) > OFF_ROUTE_THRESHOLD) {\n        setRouteCoords([]);\n      }\n\n      if (step >= steps) clearInterval(intervalRef.current);\n    }, 1000);\n\n    return () => clearInterval(intervalRef.current);\n  }, [currentLocation]); // depend on currentLocation\n\n  // --- Fetch OSRM route once per destination\n  useEffect(() => {\n    if (!destination || busStatus === \"idle\" || routeCoords.length > 0) return;\n\n    const fetchRoute = async () => {\n      try {\n        const url = `https://router.project-osrm.org/route/v1/driving/${busPosition[1]},${busPosition[0]};${destination[1]},${destination[0]}?overview=full&geometries=geojson`;\n        const res = await axios.get(url);\n        const coords = res.data.routes?.[0]?.geometry?.coordinates?.map(([lon, lat]) => [lat, lon]) || [];\n        setRouteCoords(coords);\n      } catch (err) {\n        console.error(\"Error fetching route:\", err);\n      }\n    };\n\n    fetchRoute();\n  }, [destination, busStatus, busPosition, routeCoords.length]);\n\n  return (\n    <MapContainer\n      center={busPosition}\n      zoom={10}\n      style={{height: \"100%\", width: \"100%\"}}\n      onZoom={() => setManualOverride(true)}\n      onDragStart={() => setManualOverride(true)}\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a>'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n\n      {routeCoords.length > 0 && <Polyline positions={routeCoords} pathOptions={{color: \"#1a73e8\", weight: 5, opacity: 0.9}} />}\n      {busPath.length > 1 && <Polyline positions={busPath} pathOptions={{color: \"#00cc00\", weight: 3, opacity: 0.7, dashArray: \"5,10\"}} />}\n\n      {busPosition?.[0] != null && busPosition?.[1] != null && (\n        <Marker position={busPosition} icon={busIcon}>\n          <Popup>{busPosition[0] === defaultPosition[0] ? \"Bus has not started yet üö´\" : \"Bus is here üöç\"}</Popup>\n        </Marker>\n      )}\n\n      {destination?.[0] != null && destination?.[1] != null && (\n        <Marker position={destination} icon={destinationIcon}>\n          <Popup>Next Stop üìç</Popup>\n        </Marker>\n      )}\n\n      {busPosition?.[0] != null && destination?.[0] != null && <FitToTwoMarkers positions={[busPosition, destination]} minZoom={5} />}\n      <FollowBus position={busPosition} manualOverride={manualOverride} />\n    </MapContainer>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}